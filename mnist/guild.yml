- package: mnist
  version: 0.3.0
  description: CNN and softmax regression classifiers for MNIST digits
  url: https://github.com/guildai/index/tree/master/mnist
  maintainer: Guild AI
  maintainer-email: packages@guild.ai
  license: Apache 2.0
  tags: [mnist, cnn, softmax, images, model]
  resources:
    dataset:
      description: "Yann Lecun's MNIST dataset in compressed IDX format"
      path: mnist-idx-data
      sources:
        - url: http://yann.lecun.com/exdb/mnist/train-images-idx3-ubyte.gz
          sha256: 440fcabf73cc546fa21475e81ea370265605f56be210a4024d2ca8f203523609
        - url: http://yann.lecun.com/exdb/mnist/train-labels-idx1-ubyte.gz
          sha256: 3552534a0a558bbed6aed32b30c495cca23d567ec52cac8be1a0730e8010255c
        - url: http://yann.lecun.com/exdb/mnist/t10k-images-idx3-ubyte.gz
          sha256: 8d422c7b0a1c1c79245a5bcf07fe86e33eeafee792b84584aec276f5a2dbc4e6
        - url: http://yann.lecun.com/exdb/mnist/t10k-labels-idx1-ubyte.gz
          sha256: f7ae60f92e00ec6debd23a6088c31dbd2371eca3ffa0defaefb259924204aec6

- config: mnist-base
  operations:
    train:
      description: 'Train the {{model_desc}}'
      cmd: '{{train_cmd}} --data-dir mnist-idx-data --run-dir .'
      requires: mnist/dataset
      flags:
        batch-size:
          description: Number of images to include in a training batch
          default: 100
        epochs:
          description: Number of epochs to train
          default: 10

- model: mnist-softmax
  description: Softmax regression classifier for MNIST
  extends: mnist-base
  params:
    model_desc: softmax regression
    train_cmd: softmax

- model: mnist-cnn
  description: CNN classifier for MNIST
  extends: mnist-base
  params:
    model_desc: CNN
    train_cmd: cnn
